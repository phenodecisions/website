<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhenoDecisions</title>
    <link rel="stylesheet" href="style.css?v=3">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="16x16" href="images/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="images/icons/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="64x64" href="images/icons/favicon-64x64.png">
    <link rel="icon" type="image/png" sizes="96x96" href="images/icons/favicon-96x96.png">

    <!-- Apple touch icon -->
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="images/icons/apple-touch-icon.png"> -->

    <!-- Windows tile -->
    <meta name="msapplication-TileImage" content="images/icons/mstile-150x150.png">

    <!-- PWA Manifest -->
    <link rel="manifest" href="json/manifest.json">

    <script defer src="https://cloud.umami.is/script.js"
        data-website-id="c7ef7a79-a0f2-4b3f-b5d7-f1426c7f837f"></script>

</head>

<body>
    <div id="wrapper">
        <div id="content">

            <div id="header-placeholder"></div>

            <section class="section-box video-panel" id="hero">

                <img src="images/hero_background.png" alt="Hero background" class="background-video">


                <!-- Animated Gradient Background -->
                <!-- <div class="gradient-bg"></div> -->

                <div class="header-text-wrapper">
                    <div class="header-text">
                        <h1>
                            Agro-climatic expertise to support your decision-making.
                            <!-- Transform phenology observations<br>
                            into reliable decision support. -->
                        </h1>

                        <a href="contact" class="header-link">
                            <span class="arrow">&gt;</span>
                            <span class="link-text">Contact us</span>
                        </a>

                    </div>
                </div>

            </section>

            <!-- About Section -->
            <section class="section intro-section">
                <div class="intro-wrapper">
                    <p class="intro-text">
                        Phenology assessments for temperate fruit and nut trees to enhance informed decision-making and
                        optimize
                        long-term investment outcomes.
                    </p>
                </div>
            </section>


            <!-- Vision Panels -->
            <section id="benefits" class="section">
                <div class="section-title">Practical Advantages</div>

                <div class="section-grid">

                    <div class="section-panel benefits-panel">
                        <img src="images/harvest3.jpg" alt="Benefit 1">
                        <div class="benefit-panel-content">
                            <div class="benefit-panel-title">Secure Long-Term Production Stability</div>
                            <div class="benefit-panel-text">
                                Identify whether orchards will continue to receive enough winter chill and avoid
                                exposure to damaging late frosts to safeguard reliable yields.
                            </div>
                        </div>
                    </div>

                    <div class="section-panel benefits-panel">
                        <img src="images/buds3.jpg" alt="Benefit 2">
                        <div class="benefit-panel-content">
                            <div class="benefit-panel-title">Strengthen Resilience and Resource Planning</div>
                            <div class="benefit-panel-text">
                                Use site-specific phenology insights to optimize project timing, allocate resources
                                efficiently, and maintain agricultural productivity and quality.
                            </div>
                        </div>
                    </div>

                    <div class="section-panel benefits-panel">
                        <img src="images/cherries3.jpg" alt="Benefit 3">
                        <div class="benefit-panel-content">
                            <div class="benefit-panel-title">Optimize Investments with Risk Awareness</div>
                            <div class="benefit-panel-text">
                                Make long-term decisions, such as variety selection, orchard design or region-specific
                                strategies based on data-driven forecasts and risk assessments.
                            </div>
                        </div>
                    </div>

                </div>
            </section>



            <section id="about" class="section">
                <div class="about-layout">
                    <div class="about-intro">
                        <div class="section-title">About Us</div>
                        <p class="section-subtitle">
                            With a strong foundation in phenology and climate risk research, we combine extensive
                            experience to develop practical, data-driven solutions that support decision-making in
                            horticulture, with a focus on fruit and nut production.
                        </p>
                    </div>

                    <div class="section-grid">
                        <div class="section-panel about-panel" onclick="this.classList.toggle('active')">
                            <div class="about-image">
                                <img src="images/eike_luedeling.jpg" alt="Eike Luedeling">
                            </div>
                            <div class="about-info">
                                <h3>Prof. Dr. Eike Luedeling</h3>
                                <p>CEO</p>
                                <a href="docs/Eike_Luedeling_CV.pdf" class="cv-download" download>
                                    Download CV
                                </a>
                            </div>
                                                        </div>

                        <div class="section-panel about-panel" onclick="this.classList.toggle('active')">

                            <div class="about-image">
                                <img src="images/julian_bauer.jpg" alt="Julian Bauer">
                            </div>
                            <div class="about-info">
                                <h3>Julian Bauer</h3>
                                <p>Researcher</p>
                                <a href="docs/Julian_Bauer_CV.pdf" class="cv-download" download>
                                    Download CV
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>





            <section class="globe-section">
                <h2>PhenoDecisions' Academic Track Record</h2>
                <p class="globe-intro">
                    Showcasing our global impact in tree phenology, this overview presents the studies and publications
                    we have done in a range of regions, highlighting our proven track record and leading advancements in
                    modeling and agroclimatic research.
                </p>

                <div class="globe-container">
                    <div id="refList">
                        <div class="text-bg">
                            Click a highlighted country to see previously conducted research.
                        </div>
                    </div>

                    <div id="globeContainer" style="position: relative;">
                        <canvas id="globeViz"></canvas>
                        <div class="globe-label">50+ global phenology studies</div>
                    </div>
                </div>
            </section>

            <!-- Include d3 and Globe.gl first -->
            <script src="js/d3.v7.min.js"></script>
            <script src="js/globe.gl.js"></script>

            <!-- Then your main JS module -->
            <script type="module" src="js/globe_main.js"></script>


            <section id="crops" class="section">
                <div class="section-title">Crops we've worked with</div>
                <div class="crops-grid" id="cropsGrid">

                    <div class="crop-panel" data-crop="pear">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/pear2.png" alt="Pear"></div>
                            <div class="crop-back">Pear</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="jujube">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/jujube2.png" alt="Jujube"></div>
                            <div class="crop-back">Jujube</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="pistachio">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/pistachio2.png" alt="Pistachio"></div>
                            <div class="crop-back">Pistachio</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="peach">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/peach2.png" alt="Peach"></div>
                            <div class="crop-back">Peach</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="almond">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/almond3.png" alt="Almond"></div>
                            <div class="crop-back">Almond</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="chestnut">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/chestnut2.png" alt="Chestnut"></div>
                            <div class="crop-back">Chestnut</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="sweet cherry">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/sweet_cherry2.png" alt="Cherry"></div>
                            <div class="crop-back">Cherry</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="walnut">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/walnut2.png" alt="Walnut"></div>
                            <div class="crop-back">Walnut</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="apple">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/apple2.png" alt="Apple"></div>
                            <div class="crop-back">Apple</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="ornamental cherry">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/ornamental_cherry2.png"
                                    alt="Ornamental Cherry"></div>
                            <div class="crop-back">Ornamental Cherry</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="grape">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/grapes2.png" alt="Grapevine"></div>
                            <div class="crop-back">Grapevine</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="apricot">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/apricot2.png" alt="Apricot"></div>
                            <div class="crop-back">Apricot</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="forest trees">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/forest_trees2.png" alt="Forest Trees"></div>
                            <div class="crop-back">Forest Trees</div>
                        </div>
                    </div>
                    <div class="crop-panel" data-crop="hazelnut">
                        <div class="crop-inner">
                            <div class="crop-front"><img src="images/fruits/hazelnut2.png" alt="Hazelnut"></div>
                            <div class="crop-back">Hazelnut</div>
                        </div>
                    </div>
                    <!-- your crop-panel items ... -->

                    <button id="cropsToggle" class="crops-toggle" hidden aria-expanded="false">
                        <span class="label">Show more</span>
                        <span class="chevron">â–¾</span>
                    </button>
                </div>

            </section>



            <script type="module" src="js/crop_grid.js"></script>


            <!-- Services / Products Section -->
            <section id="benefits" class="section">
                <div class="section-title">Our Services</div>

                <div class="section-grid">

                    <div class="section-panel benefits-panel">
                        <img src="images/cherry_bloom3.jpg" alt="Service 1">
                        <div class="benefit-panel-content">
                            <div class="benefit-panel-title">Phenology Modeling</div>
                            <div class="benefit-panel-text">
                                We model bloom and dormancy timing using weather data and a process-based modeling
                                framework for to create seasonal long-term forecasts.
                            </div>
                        </div>
                    </div>

                    <div class="section-panel benefits-panel">
                        <img src="images/frost_cluster3.png" alt="Service 3">
                        <div class="benefit-panel-content">
                            <div class="benefit-panel-title">Frost Risk<br>Assessments</div>
                            <div class="benefit-panel-text">
                                We assess and estimate frost risks during vulnerable phenological stages to provide
                                essential insights for informed decision-making about regions and cultivars.
                            </div>
                        </div>
                    </div>

                    <div class="section-panel benefits-panel">
                        <img src="images/orchard_landscape2.png" alt="Service 4">
                        <div class="benefit-panel-content">
                            <div class="benefit-panel-title">Cultivar & Region<br>Specific Forecasts</div>
                            <div class="benefit-panel-text">
                                We calibrate cultivar- and region-specific phenology models to identify promising
                                options that remain reliable under future climate conditions.
                            </div>
                        </div>
                    </div>

                </div>
            </section>






            <!-- Contact Section -->
            <div id="contact-placeholder"></div>




            <div id="footer-placeholder"></div>


        </div>
    </div>

    <!-- Scripts -->

    <!-- GSAP + plugins first -->
    <script src="js/gsap.min.js"></script>
    <script src="js/ScrollTrigger.min.js"></script>
    <script src="js/ScrollSmoother.min.js"></script>
    <script src="js/MotionPathPlugin.min.js"></script>

    <!-- your site code last (load once) -->
    <script src="js/script.js"></script>

    <div id="form-toast"
        style="display:none; position: fixed; top: 20px; right: 20px; background: #333; color: #fff; padding: 1rem 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); z-index: 1000;">
    </div>

    <script>
        // Function to show toast
        function showToast(message) {
            const toast = document.getElementById('form-toast'); // define here
            toast.textContent = message;
            toast.style.display = 'block';
            toast.style.opacity = '0';
            toast.style.transform = 'translateY(-20px)';

            requestAnimationFrame(() => {
                toast.style.transition = 'all 0.4s ease';
                toast.style.opacity = '1';
                toast.style.transform = 'translateY(0)';
            });

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(-20px)';
                setTimeout(() => toast.style.display = 'none', 400);
            }, 3000);
        }

        // Load contact form dynamically and attach submit listener
        fetch('contact-form.html')
            .then(res => res.text())
            .then(html => {
                document.getElementById('contact-placeholder').innerHTML = html;

                const form = document.getElementById('contact-form');
                if (!form) return; // safety check

                form.addEventListener('submit', function (e) {
                    e.preventDefault();

                    const formData = new FormData(form);

                    fetch('contact.php', {
                        method: 'POST',
                        body: formData
                    })
                        .then(r => r.text())
                        .then(data => {
                            showToast(data);
                            form.reset();
                        })
                        .catch(() => showToast('Sorry, something went wrong. Please try again.'));
                });
            });
    </script>

    <script>
        // Load header dynamically
        fetch('header.html')
            .then(r => r.text())
            .then(html => {
                document.getElementById('header-placeholder').innerHTML = html;

                // Run hamburger JS AFTER header is inserted
                const hamburger = document.getElementById("hamburger");
                const mobileMenu = document.getElementById("mobileMenu");
                if (hamburger && mobileMenu) {
                    hamburger.addEventListener("click", () => {
                        mobileMenu.classList.toggle("active");
                    });
                }
                // After header is injected
                const links = document.querySelectorAll(".header-link");
                const arrows = document.querySelectorAll(".header-link .arrow");
                const logo = document.querySelector(".logo-img");

                // Re-init GSAP animations for links and arrows
                links.forEach(link => {
                    gsap.to(link, {
                        y: gsap.utils.random(-1, 1),
                        duration: 1,
                        repeat: -1,
                        yoyo: true,
                        ease: "power1.inOut"
                    });

                    link.addEventListener("mouseenter", () => {
                        gsap.to(link, {
                            y: gsap.utils.random(-1, 1),
                            duration: 0.2,
                            repeat: 3,
                            yoyo: true,
                            ease: "power1.inOut"
                        });
                    });
                });

                arrows.forEach(arrow => {
                    const parentLink = arrow.closest(".header-link");
                    parentLink.addEventListener("mouseenter", () => {
                        gsap.to(arrow, { x: 12, duration: 0.4, ease: "power2.out" });
                    });
                    parentLink.addEventListener("mouseleave", () => {
                        gsap.to(arrow, { x: 0, rotation: 0, duration: 0.6, ease: "elastic.out(1, 0.5)" });
                    });
                });

                // Logo wobble
                // if (logo) {
                //     let wobbleTween;
                //     logo.addEventListener("mouseenter", () => {
                //         if (wobbleTween) wobbleTween.kill();
                //         wobbleTween = gsap.timeline()
                //             .to(logo, { rotation: 12, duration: 0.4, ease: "power1.out" })
                //             .to(logo, { rotation: -12, duration: 0.4, ease: "power1.inOut" })
                //             .to(logo, { rotation: 0, duration: 0.6, ease: "power2.out" });
                //     });
                // }

            });

        fetch("footer.html")
            .then(res => res.text())
            .then(html => document.getElementById("footer-placeholder").innerHTML = html);
    </script>




</body>

</html>